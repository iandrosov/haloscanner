{"name":"Haloscanner","tagline":"Infinite Peripherals iOS Scanner Plugin for hybrid applications.","body":"### Welcome to Haloscanner GitHub Pages.\r\nThis is native iOS Scanner plugin for Cordova 3.3.0 hybrid applications. Supports Infinite Peripherals scanner devices. This plugin is created with Apache Cordova 3.3.0, assuming that Cordova has been installed and set up will start with actual plugin creation. For Cordova setup refer to [http://cordova.apache.org](http://cordova.apache.org).\r\n\r\n### Get Started with Scanner plugin\r\n1. Download Infinate Perifirals Unversal SDK v1.82\r\n\r\n   This will require registration for Developer Portal and sign the basic NDA to get to download page.  \r\n   Download SDK file - DTDevices-iOS_2013-10-29_v1.82_Universal_XCode5  \r\n\r\n2. Add required Framework to project - ExternalAccessory.framework\r\n\r\n3. Add scanner SDK DTDevices related files to project\r\n  * Create InfineaSDK Group in project\r\n  * Copy DTDevice.h and libdtdev.a files into new SDK group\r\n\r\n   If you find that project has errors then it is effect of a bug.  \r\n   XCode 5 has a bug for adding new files to project described here how to fix that:  \r\n   https://devforums.apple.com/message/898557#898557  remove extra garbage / \\  \r\n   that xcode places in Library search paths.  \r\n\r\n4. Add Supported External Accessory Products items to project plist property file\r\nAdd 4 items\r\n\r\n```\r\ncom.datecs.linea.pro.bar\r\ncom.datecs.linea.pro.msr\r\ncom.datecs.iserial.communication\r\ncom.datecs.pinpad\r\n```\r\n\r\n5. Create basic Plugin IPCardScanner class derive from CDVPlugin to manage delegate and device interface. When .m .h files are generated they have incorrect import <Cordova/Cordova.h> fix it by replacing that with import “CDV.h” for plugin development. \r\n\r\n6. Include DTDevice.h file.\r\nYour header file will look like this now.\r\n\r\n```objective-c\r\n#import \"CDV.h\"\r\n#import \"DTDevices.h\"\r\n\r\n@interface IPCardScanner : CDVPlugin {\r\n    DTDevices *dtdev;\r\n}\r\n@end\r\n```\r\n\r\n7. Create native Plugin interface methods for JScript to handle device notifications to HTML side\r\n\r\n```objective-c\r\n-(void) initScanner:(CDVInvokedUrlCommand*)command;\r\n-(void) scanBarcode:(NSString*)num;\r\n-(void) scanPaymentCard:(NSString*)num;\r\n-(void) scannerConect:(NSString*)num;\r\n-(void) scannerBattery:(NSString*)num;\r\n```\r\n   Now the plugin interface will look like this:  \r\n\r\n```objective-c\r\n#import \"CDV.h\"\r\n#import \"DTDevices.h\"\r\n\r\n@interface IPCardScanner : CDVPlugin {\r\n    DTDevices *dtdev;\r\n}\r\n\r\n// Cordova command method initialize Scanner device\r\n-(void) initScanner:(CDVInvokedUrlCommand*)command;\r\n\r\n-(void) scanBarcode:(NSString*)num;\r\n-(void) scanPaymentCard:(NSString*)num;\r\n-(void) scannerConect:(NSString*)num;\r\n-(void) scannerBattery:(NSString*)num;\r\n\r\n@end\r\n```\r\n\r\n8. Implement DTDevices interfaces for card scan and magnetic swipe in plugin PICardScanner. \r\n  * Now we write some Objective-c code to implement interface methods we defined.  \r\n  * In this plugin we used 2 Cordova methods to pass data events back and force for native to web layer.  \r\n\r\n   Command method - Java Script calling native method.  \r\n    `initScanner:(CDVInvokedUrlCommand*)command` - this is more of a reply to method call.   \r\n   This method is invoked from JavaScript via Cordova interface and reply is sent back as a command.  \r\n\r\n```javascript\r\ncordova.exec(onSuccessScan, onErrorScan, \"PICardScanner\", \"initScanner\", []);\r\n```\r\n\r\nIn this case `onSuccessScan` and `onErrorScan` is javascript asynchronous response handler methods. These methods will be called when initScanner native methods returns. This initialization method is called by our HTML page to start the scanner device.\r\n\r\nNative Method Initiating a call to JavaScript function using WebView object\r\n\r\n```objective-c\r\nNSString *jsStatement = [NSString stringWithFormat:@\"onSuccessScanBarcode('%@');\", num];\r\n[self.webView stringByEvaluatingJavaScriptFromString:jsStatement];\r\n[self.viewController dismissViewControllerAnimated:YES completion:nil];\r\n```\r\nThis is a way to call JavaScript from Native code. \r\nin our implementation for each native plugin method we will call a corresponding JavaScript function and perform some action on the UI\r\n\r\nScanner Device Notification Methods\r\n\r\nOur mobile scanner device Universal SDK handles various attachments from Infinate Peripherals for this example we are using iPad scanner device attachment Infinea Tab 4 that has dual function to scan barcodes and magnetic strip on credit cards.\r\nWe need to implement following methods in our plugin\r\n\r\n```objective-c\r\n-(void)barcodeData:(NSString *)barcode type:(int)type\r\n- (void)magneticCardData:(NSString *)track1 track2:(NSString *)track2 track3:(NSString *)track3\r\n-(void)connectionState:(int)state\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}